<div class="mask"
     (click)="goBack()">
    <div class="container" (click)="$event.stopPropagation()">
        <!-- 头部按钮区域 -->
        <div style="text-align: right;">
            <button nz-button 
                    nzType="primary"
                    nzSize="large"
                    nzShape="circle"
                    style="margin-right: 10px;"
                    (click)="confirm()">
                <i nz-icon nzType="check" nzTheme="outline"></i>
            </button>
            <button nz-button
                    nzDanger
                    nzSize="large"
                    nzShape="circle"
                    nz-popconfirm
                    nzPopconfirmTitle="你真的要删除这条待办事项吗？"
                    nzPopconfirmPlacement="bottom"
                    (nzOnConfirm)="confirm()"
                    (nzOnCancel)="cancel()">
                <i nz-icon nzType="delete" nzTheme="outline"></i>
            </button>
        </div>

        <!-- 选择是否完成 -->
        <label nz-checkbox
               (click)="$event.stopPropagation()"
               [(ngModel)]="currentTodo.completedFlag">
            标记完成
        </label>

        <nz-divider nzText="标题" nzOrientation="left"></nz-divider>
        <div class="input-container">
            <input nz-input
                   [(ngModel)]="currentTodo.title" 
                   placeholder="待办事项" 
                   [disabled]="!!currentTodo.completedFlag" 
                   id="title" 
                   name="title">
        </div>

        <nz-divider nzText="日期与提醒" nzOrientation="left"></nz-divider>
        <div class="plan-date-container input-container">
            <span class="prefix">截止日期</span>
            <nz-date-picker [(ngModel)]="dueDate"
                            nzShowTime
                            [disabled]="!!currentTodo.completedFlag"
                            [nzDisabledDate]="dueDisabledDate"
                            (ngModelChange)="handleDueDateChange($event)">
            </nz-date-picker>
        </div>
        <div class="plan-date-container input-container">
            <span class="prefix">计划日期</span>
            <nz-date-picker [(ngModel)]="planDate"
                            nzShowTime
                            [disabled]="!!currentTodo.completedFlag"
                            [nzDisabledDate]="planDisabledDate"
                            (ngModelChange)="handlePlanDateChange($event)">
            </nz-date-picker>
        </div>
        <div class="input-container">
            <span class="prefix">计划提醒</span>
            <nz-switch [(ngModel)]="currentTodo.notifyMe"
                       [nzControl]="true"
                       [nzDisabled]="!!currentTodo.completedFlag"
                       (click)="clickSwitch()">
            </nz-switch>
        </div>
    </div>
</div>
